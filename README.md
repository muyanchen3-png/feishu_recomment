# 微博推送服务

这是一个基于w2.py工作流的微博监控和推送服务，用户可通过手机号验证码登录获取cookie，配置关键词和飞书webhook，实现定时微博信息推送。

## 特性

- 🔐 手机号验证码登录微博
- 🤖 自动监控指定关键词的内容
- 🧠 AI总结微博舆情
- 📱 飞书机器人推送通知
- ⏰ 定时推送（可配置时间）
- 💾 SQLite数据库存储配置
- 🌐 Web界面配置

## 安装和运行

1. 安装依赖：
```bash
./setup.sh
```

2. 启动服务：
```bash
./run_service.sh
```

或直接运行：
```bash
python service.py
```

3. 访问 http://localhost:5000 配置服务

## 使用说明

1. 在网页中输入微博手机号，点击"获取验证码"
2. 浏览器会自动打开，等待接收短信验证码
3. 输入验证码完成登录并获取cookie
4. 配置关键词（用逗号分隔）
5. 设置飞书webhook地址
6. 选择推送时间
7. 保存配置

服务将在指定时间自动推送汇总的微博信息到飞书。

## 工作流程

1. 用户配置手机号→获取验证码→登录获取cookie
2. 保存cookie、关键词、webhook等配置
3. 定时任务读取配置，调用w2.py工作流
4. 爬取微博→AI总结→推送到飞书

## 注意事项

- 验证码登录需要手动输入短信验证码
- 需要有效的飞书机器人webhook
- 初次运行会创建数据库文件weibo_push_service.db
- Selenium需要Chrome浏览器

## 安全提示

- 生产环境建议修改数据库配置和API密钥
- 定期清理日志文件
- 保护好用户的cookie信息
